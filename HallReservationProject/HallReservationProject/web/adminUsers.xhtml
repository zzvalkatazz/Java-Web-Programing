
        <!DOCTYPE html>
        <html xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://xmlns.jcp.org/jsf/html"
              xmlns:f="http://xmlns.jcp.org/jsf/core"
              xmlns:p="http://primefaces.org/ui">

        <h:head><title>Потребители (Админ)</title></h:head>

        <h:body>
        <h:form id="usersForm">
            <p:growl id="msgs" showDetail="true" life="6000"/>

            <f:event type="preRenderView" listener="#{adminUsersBean.load}" />



            <p:panel header="Потребители" rendered="#{loginBean.admin}"
                     style="max-width:1000px;margin:20px auto;">
        <p:toolbar style="margin-bottom:10px;">


                    <p:toolbarGroup align="right">
                        <p:commandButton value="Обнови" icon="pi pi-refresh"
                                         update="table"
                                         process="@this"/>
                    </p:toolbarGroup>
                </p:toolbar>


                <p:dataTable id="table"
                     value="#{adminUsersBean.users}"
                     var="u"
                     paginator="true"
                     rows="10"
                     emptyMessage="Няма потребители."
                     filterEvent="keyup">

        <p:column headerText="Username" filterBy="#{u.username}">
            <h:outputText value="#{u.username}" />
        </p:column>

        <p:column headerText="Име" filterBy="#{u.fullName}">
            <h:outputText value="#{u.fullName}" />
        </p:column>

        <p:column headerText="Email" filterBy="#{u.email}">
            <h:outputText value="#{u.email}" />
        </p:column>

        <p:column headerText="Role" filterBy="#{u.role}">
            <h:outputText value="#{u.role}" />
        </p:column>
                    <p:column headerText="Действия" style="width:180px;text-align:center">
                        <p:commandButton value="Reset парола"
                                         icon="pi pi-key"
                                         actionListener="#{adminUsersBean.resetPasswordFor(u)}"
                                         update=":usersForm:table :usersForm:msgs"
                                         process="@this"
                                         onclick="return confirm('Да генерирам нова временна парола?');"/>
                    </p:column>
                </p:dataTable>

                <p:separator/>

                <p:commandButton value="Назад"
                                 icon="pi pi-arrow-left"
                                 action="/halls.xhtml?faces-redirect=true"
                                 ajax="false"/>
            </p:panel>
        </h:form>
        </h:body>
        </html>

