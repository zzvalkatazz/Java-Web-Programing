
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Заявки за резервации (Админ)</title>
    <style>
    .button-decision {
        width: 105px !important;    
        display: inline-flex !important;
        justify-content: center !important;
        align-items: center !important;
        padding-left: 0 !important; 
        margin: 0 5px !important; 
    }
    
   
    .button-reject {
        background-color: #f8f9fa !important;
        color: #c62828 !important;
        border: 1px solid #c62828 !important;
    }
</style>
</h:head>

<h:body>

<h:form id="adminForm">
    <p:growl id="msgs" showDetail="true" life="4000"/>

   

    
    <p:panel header="Заявки за резервации (PENDING)"
             rendered="#{loginBean.admin}"
             style="width:95%;margin:20px auto;">

        <p:commandButton value="Обнови"
                         icon="pi pi-refresh"
                         update="table msgs"
                         process="@this"
                         style="margin-bottom:10px"/>

        <p:dataTable id="table"
                     value="#{adminReservationBean.pendingReservations}"
                     var="r"
                     rowKey="#{r.id}"
                     paginator="true"
                     rows="10"
                     emptyMessage="Няма чакащи заявки."
                     style="width:100%">

            <p:column headerText="ID" style="width:70px;text-align:center">
                <h:outputText value="#{r.id}" />
            </p:column>

            <p:column headerText="Зала">
                <h:outputText value="#{r.hall.name} (#{r.hall.location})" />
            </p:column>

            <p:column headerText="Потребител" style="width:200px">
                <h:outputText value="#{r.user.username}" />
            </p:column>

            <p:column headerText="Начало" style="width:180px">
                <h:outputText value="#{r.startTime}" />
            </p:column>

            <p:column headerText="Край" style="width:180px">
                <h:outputText value="#{r.endTime}" />
            </p:column>

            <p:column headerText="Тип" style="width:140px">
                <h:outputText value="#{r.eventType}" />
            </p:column>

            <p:column headerText="Действия" style="width:220px;text-align:center">
                <p:commandButton value="Одобри"
                 icon="pi pi-check"
                 actionListener="#{adminReservationBean.approve(r)}"
                 update=":adminForm:table :adminForm:msgs"
                 styleClass="button-decision "
                 style="margin-bottom: 10px !important; width: 110px; display: block;"
                 process="@this"
                 />

<p:commandButton value="Откажи"
                 icon="pi pi-times"
                 actionListener="#{adminReservationBean.reject(r)}"
                 update=":adminForm:table :adminForm:msgs"
                 styleClass="button-decision button-reject"
                 process="@this"
                 onclick="return confirm('Сигурен ли си?');"/>

            </p:column>

        </p:dataTable>

        <p:separator/>

        <p:commandButton value="Назад към зали"
                         icon="pi pi-arrow-left"
                         action="/halls.xhtml?faces-redirect=true"/>
    </p:panel>

</h:form>

</h:body>
</html>
