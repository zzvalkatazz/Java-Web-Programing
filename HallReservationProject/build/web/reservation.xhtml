<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Заявка за резервация</title>
</h:head>

<h:body>

    
    <f:metadata>
        <f:viewParam name="hallId" value="#{reservationBean.hallId}" />
    </f:metadata>

<h:form id="resForm">
    <p:growl id="msgs" showDetail="true" life="4000"/>

    <p:panel header="Заявка за резервация"
             style="max-width:520px;margin:30px auto;">

        <p:panelGrid columns="2" columnClasses="label,value" style="width:100%">

            <!-- ЗАЛА -->
            <h:outputText value="Зала:" />
            <p:selectOneMenu value="#{reservationBean.hallId}"
                             required="true"
                             requiredMessage="Избери зала."
                             style="width:100%">
                <f:selectItem itemLabel="-- избери --" itemValue="#{null}" />
                <f:selectItems value="#{reservationBean.halls}"
                               var="h"
                               itemLabel="#{h.name} (#{h.location})"
                               itemValue="#{h.id}" />
            </p:selectOneMenu>

            <!-- НАЧАЛО -->
            <h:outputText value="Начало:" />
            <p:datePicker id="startDt"
                          value="#{reservationBean.startDate}"
                          showTime="true"
                          hourFormat="24"
                          pattern="dd.MM.yyyy HH:mm"
                          required="true"
                          style="width:100%" />

            <p:message for="startDt" />
            <h:outputText value="Край:" />
    <p:datePicker id="endDt"
              value="#{reservationBean.endDate}"
              showTime="true"
              hourFormat="24"
              pattern="dd.MM.yyyy HH:mm"
              required="true">

    <f:validator validatorId="dateRangeValidator"/>
    <f:attribute name="start" value="#{reservationBean.startDate}"/>

    <p:ajax event="dateSelect"
            process="startDt endDt"
            update="msgs endMsg"/>
</p:datePicker>

<p:message id="endMsg" for="endDt"/>




            <!-- ТИП -->
            <h:outputText value="Тип събитие:" />
            <p:inputText value="#{reservationBean.eventType}"
                         style="width:100%" />
        </p:panelGrid>

        <p:separator/>

       <p:commandButton value="Заяви"
                 icon="pi pi-send"
                 action="#{reservationBean.requestReservation}"
                 process="@form"
                 update="@form"
                 style="width:100%"
                 rendered="#{loginBean.user}" />
    </p:panel>
</h:form>


</h:body>
</html>
